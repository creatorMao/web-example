<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

</body>
<script>

  const to = async (promise) => {
    return new Promise((resolve, reject) => {
      promise
        .then((res) => {
          resolve([null, res]);
        })
        .catch((err) => {
          resolve([err, null]);
        })
    })
  }

  const getUserInfoFail = async () => {
    return new Promise((resolve, reject) => {
      reject({
        code: '500',
        message: '请求数据失败'
      });
    })
  }

  const getUserInfoSuccess = async () => {
    return new Promise((resolve, reject) => {
      resolve({
        code: '200',
        message: '请求成功'
      });
    })
  }

  const test = async () => {
    //方式1
    getUserInfoFail()
      .catch((res) => {
        console.log('方式1', res);
      })

    //方式2
    try {
      const res = await getUserInfoFail()
    }
    catch (e) {
      console.log('方式2',e);
    }

    //方式3
    {
      const [error, res] = await to(getUserInfoFail())
      console.log('方式3-失败',error, res);
    }

    //方式3
    {
      const [error, res] = await to(getUserInfoSuccess())
      console.log('方式3-成功',error, res);
    }
  }

  test()
</script>

</html>